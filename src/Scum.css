/* === Base & Full Screen === */
html,
body,
#root,
.App {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden; /* Prevent scrollbars on body */
    font-family: sans-serif; /* Add a default font */
    touch-action: manipulation; /* Prevent double-tap zoom on mobile */
    /* Improve base font scaling */
    font-size: 16px; /* Set a base */
}

/* === Main Wrapper - Uses Flexbox === */
.poker-table--wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(#8B0000 60%, #6A0000 82%);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    /* Transitions/Performance */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
}

/* Wrapper for error/showdown states */
.error-container, .showdown-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px; /* Slightly reduce padding */
    text-align: center;
}
.showdown-container--wrapper {
    color: white;
    background-color: rgba(0, 0, 0, 0.85);
    padding: 20px; /* Slightly reduce padding */
    border-radius: 10px;
    max-width: 95%; /* Allow slightly more width */
    max-height: 90%;
    overflow-y: auto; /* Allow scrolling if content overflows */
}
.showdown-container--wrapper h1 { margin-top: 0; font-size: 1.5em; }
.showdown-container--wrapper button {
    padding: 10px 15px; /* Adjust padding */
    font-size: 0.9em; /* Adjust font size */
    cursor: pointer;
}
.showdown-container--wrapper ol { text-align: left; display: inline-block; padding-left: 20px; }

/* === Game Table Area === */
/* === Game Table Area (NOW A GRID CONTAINER) === */
.poker-table--container {
    flex-grow: 1; /* Takes up available vertical space */
    width: 100%;
    min-height: 0; /* Fix potential flexbox overflow issue */
    box-sizing: border-box;
    padding: 10px; /* Padding around the grid */

    display: grid;
    /* Define a 3x3 grid */
    /* Columns: Left player area, Center pile area, Right player area */
    /* Rows: Top players, Center pile/players, Bottom player */
    grid-template-columns: minmax(100px, 1fr) minmax(150px, 2fr) minmax(100px, 1fr); /* Adjust min/max/fractions as needed */
    grid-template-rows: minmax(100px, 1fr) minmax(100px, auto) minmax(100px, 1fr); /* Adjust min/max/auto as needed */
    gap: 10px; /* Space between grid cells */

    /* Center items within their cells by default (can be overridden) */
    align-items: center;
    justify-items: center;

    /* Transitions/Performance */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
}
/* === Player Positioning (Responsive Percentages) === */
.p0, .p1, .p2, .p3, .p4 {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: auto;
    /* Use min-width cautiously, maybe remove/reduce for mobile */
    min-width: 80px; /* Reduced base min-width */
    transform: translate(-50%, -50%); /* Center elements based on their top/left */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
    z-index: 10; /* Ensure players are above pile visually if overlap occurs */
}

.p0, .p1, .p2, .p3, .p4 {
    /* REMOVED: position: absolute, top, left, right, bottom, transform */
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%; /* Take width of grid cell */
    max-width: 180px; /* Limit max width */
    min-width: 80px; /* Set a minimum */
    height: fit-content; /* Size based on content */
    /* Transitions/Performance */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
}


/* Assign players to grid cells */
.p0 { /* Human - Bottom Center */
    grid-column: 2 / 3;
    grid-row: 3 / 3;
    align-self: end; /* Align to bottom of cell */
}
.p1 { /* Player 2 - Left Middle */
    grid-column: 1 / 2;
    grid-row: 2 / 3;
    justify-self: right; /* Center horizontally in cell */
    align-self: center; /* Center vertically */
    margin-right: 10px;
}
.p2 { /* Player 3 - Top Left */
    grid-column: 1 / 2;
    grid-row: 1 / 2;
    justify-self: right; /* Center horizontally */
    align-self: start; /* Align to top */
    
}
.p3 { /* Player 4 - Top Right */
    grid-column: 3 / 4;
    grid-row: 1 / 2;
    justify-self: left  ; /* Center horizontally */
    align-self: start; /* Align to top */
}
.p4 { /* Player 5 - Right Middle */
    grid-column: 3 / 4;
    grid-row: 2 / 3;
    justify-self: left; /* Center horizontally */
    align-self: center; /* Center vertically */
}

/* Player info styling remains largely the same */
.player-entity--wrapper {
    width: 100%; /* Ensure wrapper takes cell width if needed */
    max-width: 80px; /* Limit width */
    transition: opacity 0.3s ease;
    margin: 5px;
}
/* Active/Inactive/Current styling remains the same */
.player-entity--wrapper.active-in-round { opacity: 1; }
.player-entity--wrapper.inactive-in-round { opacity: 0.5; }
.player-entity--wrapper.current-player-turn { opacity: 1; }

.player-entity--top {
    position: relative;
    padding: 4px; /* Reduced padding */
    border-radius: 4px; /* Slightly smaller radius */
    background-color: rgba(0, 0, 0, 0.5); /* Increased contrast slightly */
    margin-bottom: 20px;
    border: 2px solid transparent;
    transition: border-color 0.3s ease;
}

.active-in-round .player-entity--top { border-color: #4CAF50; }
.inactive-in-round .player-entity--top { border-color: #f44336; }
.current-player-turn .player-entity--top {
    border-color: #2196F3;
    box-shadow: 0 0 6px rgba(33, 150, 243, 0.6); /* Slightly smaller shadow */
}

.player-info--name {
    font-size: 0.7rem; /* Base font size */
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    color: white;
    font-weight: bold; /* Make names slightly bolder */
}

.player-info--card-count, .player-info--rank, .player-info--status {
    font-size: 0.6rem; /* Base font size */
    color: rgba(255, 255, 255, 0.85); /* Slightly brighter */
}

.player-info--status {
    display: inline-block;
    padding: 1px 4px; /* Reduced padding */
    border-radius: 3px;
    margin-top: 2px;
    font-weight: bold;
}
/* Status background colors remain the same */
.active-in-round .player-info--status { background-color: rgba(76, 175, 80, 0.3); }
.inactive-in-round .player-info--status { background-color: rgba(244, 67, 54, 0.3); }
.current-player-turn .player-info--status { background-color: rgba(33, 150, 243, 0.3); }

/* === Community Cards / Table Pile (Grid Item) === */
.community-card-container {
    /* REMOVED: position: absolute, top, left, transform */
    grid-column: 2 / 3; /* Center column */
    grid-row: 1 / 3;    /* Center row */
    justify-self: center; /* Ensure horizontal centering */

    display: flex;
    justify-content: center;
    max-width: 0%; /* Limit width */
    height: auto;
    pointer-events: none;
    /* Transitions/Performance */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
}
.table-pile-container {
    /* Styles for the pile itself within the container */
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: nowrap;
    gap: 5px; /* Match container gap */
}
/* === Specific Styling for Cards ON THE TABLE PILE === */
/* Card styling ON THE PILE remains the same */
.community-card-container .playing-card,
.community-card-container .robotcard {
    position: relative; /* Keep relative within flex container */
    flex-shrink: 0;
    box-shadow: 1px 1px 3px rgba(0,0,0,0.4);
    margin: 0; /* Remove any default margin */

    /* --- Responsive Sizing for Table Cards --- */
    width: 7vmin; /* Slightly smaller base size */
    height: 10vmin; /* Maintain aspect ratio (approx 1.4) */
    min-width: 24px; /* Prevent getting too tiny */
    min-height: 34px;
    max-width: 35px; /* Limit size on large screens */
    max-height: 49px;
    /* --- End Responsive Sizing --- */
}


/* === Game Message (Keep Absolute Positioning) === */
.game-message-container {
    position: absolute; /* Keep absolute for overlay */
    top: 15px; /* Position relative to poker-table--wrapper */
    left: 50%;
    transform: translateX(-50%);
    /* Other styles remain the same */
    color: white;
    background-color: rgba(0, 0, 0, 0.75);
    padding: 5px 10px;
    border-radius: 4px;
    z-index: 50;
    text-align: center;
    min-width: 150px;
    max-width: 85%;
    font-size: 0.85rem;
}
.game-message-subtext {
    font-size: 0.75rem; /* Base size */
    margin-top: 3px;
    opacity: 0.9;
}

/* === Game Controls Area (Bottom Bar) === */
.game-controls-area {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 2px 10px; /* Adjusted padding */
    background-color: rgba(0, 0, 0, 0.8); /* Slightly darker */
    box-sizing: border-box;
    flex-shrink: 0;
    min-height: 0px; /* Reduced min-height */
    z-index: 100; /* Ensure controls are on top */
    margin-top: 100px;
}

/* Game Action Bar (Play/Pass buttons) */
.game-action-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px; /* Reduced gap */
}
.game-controls {
    display: flex;
    gap: 10px; /* Reduced gap */
}
.game-controls button {
    padding: 8px 16px; /* Adjusted padding */
    font-size: 0.9em; /* Adjusted font size */
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #333;
    color: white;
    cursor: pointer;
    transition: background-color 0.2s ease;
    min-width: 70px; /* Ensure minimum tap area */
}
.game-controls button:not(:disabled):hover { background-color: #555; }
.game-controls button:disabled { opacity: 0.5; cursor: not-allowed; }
.game-controls .play-button { background-color: #28a745; border-color: #28a745; }
.game-controls .play-button:not(:disabled):hover { background-color: #218838; }
.game-controls .pass-button { background-color: #ffc107; border-color: #ffc107; color: #333; }
.game-controls .pass-button:not(:disabled):hover { background-color: #e0a800; }

/* AI Speed Slider */
.ai-speed-slider-container {
    display: flex;
    align-items: center;
    gap: 8px; /* Reduced gap */
    color: white;
    font-size: 0.8em; /* Reduced font size */
    flex-basis: auto; /* Let it size based on content */
    flex-shrink: 1;
    justify-content: flex-end;
}
.ai-speed-slider-container label { white-space: nowrap; }
.ai-speed-slider-container input[type="range"] {
    cursor: pointer;
    flex-grow: 0; /* Don't let it grow excessively */
    width: 80px; /* Fixed smaller width */
    max-width: 80px;
}
.ai-speed-slider-container span {
    min-width: 45px; /* Reduced min-width */
    text-align: right;
}

.player-hand-container {
    position: relative; /* Crucial: .abscard needs a positioned ancestor */
    display: flex;
    justify-content: center;
    align-items: flex-end;
    width: 100%; /* Takes width from parent player element */
    max-width: 280px; /* Limit how wide the fan can get */
    min-width: 100px;
    height: 11vmin; /* Responsive height based on viewport */
    min-height: 60px; /* Minimum height */
    max-height: 90px; /* Maximum height */
    margin-top: -40px; /* Add some space between info and hand */
    /* Transitions/Performance */
    transition: all 0.2s ease-in-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
    /* overflow: hidden; Might be useful to clip cards cleanly */
}

/* Card absolute positioning for fanning/arcing (MUST REMAIN ABSOLUTE) */
/* Card absolute positioning for fanning/arcing (MUST REMAIN ABSOLUTE) */
.abscard {
    position: absolute; /* KEEP ABSOLUTE for fanning effect */
    bottom: 0;
    /* --- Responsive Sizing for Hand Cards --- */
    width: 5vmin;       /* Base responsive width */
    height: 7vmin;     /* Base responsive height (maintain aspect ratio ~1.4) */
    min-width: 25px;    /* Minimum size */
    min-height: 30px;
    max-width: 70px;    /* Maximum size */
    max-height: 90px;
    /* --- End Responsive Sizing --- */
    transform-origin: bottom center;
    transition: all 0.2s ease-out;
    will-change: transform, opacity;
    backface-visibility: hidden;
    /* JS will add transform: rotate/translate */
}
.abscard > div { pointer-events: auto; height: 100%; }

.playing-card {
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Space out rank/suit */
    align-items: center;
    background-color: white;
    /* --- Responsive Font Size --- */
    font-size: 1.8vmin; /* Base font size scales with card */
    min-font-size: 0.5em; /* Absolute minimum (relative to parent) */
    max-font-size: 0.85em; /* Absolute maximum (relative to parent) */
    /* --- End Responsive Font Size --- */
    height: 100%; /* Take height from .abscard */
    width: 100%; /* Take width from .abscard */
    border: 1px solid gray;
    border-radius: 3px; /* Consider scaling radius slightly: max(1px, 0.5vmin) */
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    user-select: none;
    overflow: hidden;
    padding: 0.5vmin 0; /* Responsive vertical padding */
    box-sizing: border-box;
}
/* Add styles for rank/suit if they exist and need sizing */
.playing-card h6 { /* Target the text element */
    font-size: 1em; /* Inherit calculated size from .playing-card */
    line-height: 1.2; /* Adjust line height */
    margin: 0;
    padding: 0 1px; /* Minimal horizontal padding */
    white-space: nowrap; /* Prevent wrapping */
}
/* Add styles for rank/suit if they exist */
.playing-card .rank { font-size: 0.9em; line-height: 1; }
.playing-card .suit { font-size: 0.9em; line-height: 1; }

.playing-card.selected {
    border: 2px solid yellow;
    box-shadow: 0 0 6px yellow; /* Reduced shadow */
    transform: translateY(-10px) !important; /* Reduced lift */
}

/* Robot card styling */
.robotcard {
    background-color: #890808;
    height: 100%; /* Match playing card height via .abscard */
    width: 100%;  /* Match playing card width via .abscard */
    border: 1px solid #500000;
    border-radius: 3px;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

/* Player status notification */
.player-status-notification {
    background-color: rgba(0, 0, 0, 0.75);
    color: white;
    padding: 3px 8px; /* Reduced padding */
    border-radius: 3px;
    position: relative;
    top: -25px; /* Adjust position relative to smaller player info */
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    z-index: 10;
    font-size: 0.75rem; /* Reduced font size */
}

/* Rules Section - Reduce font sizes and padding for mobile */
.rules-toggle-button {
    margin-top: 8px;
    padding: 6px 12px;
    font-size: 0.85em;
    /* Other styles remain */
}

.rules-container {
    margin-top: 15px;
    padding: 10px;
    font-size: 0.9em; /* Reduce base font size */
    /* Other styles remain */
}
.rules-container h2 { font-size: 1.2em; margin-bottom: 8px; }
.rules-container p { margin-bottom: 8px; line-height: 1.5; }
.rules-container ul { padding-left: 15px; margin-bottom: 8px; }
.rules-container li { margin-bottom: 4px; }

.player-entity--top {
    position: relative; /* Ensure notification is relative to this */
    /* ... other styles ... */
}

.player-status-notification {
    position: absolute; /* Keep absolute */
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    /* ... other styles ... */
    background-color: rgba(0, 0, 0, 0.75);
    color: white;
    padding: 3px 8px;
    border-radius: 3px;
    white-space: nowrap;
    z-index: 10;
    font-size: 0.75rem;
}


/* Highlight for current player name */
.player-info--name.current-player-name-highlight {
    color: #4dabf7; /* Lighter blue for better contrast on dark bg */
    font-weight: bold;
    transition: color 0.3s ease-in-out, font-weight 0.3s ease-in-out;
}


 